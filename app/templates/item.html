{% extends "base.html" %}

{% block title %}
	{{ item.name }} - Flask-O-shop
{% endblock %}

{% block content %}
	{% with msgs =  get_flashed_messages(with_categories=True) %}
	{% for c, msg in msgs %}
		{% if c == 'error' %}
			<div class="flash-error">
		{% else %}
			<div class="success">
		{% endif %}
			{{ msg | safe}}</div><br>
	{% endfor %}
	{% endwith %}

	<div class="container">
		<div class="row">
			<!-- Left: Gallery -->
			<div class="col-lg-7 mb-4">
				<div class="card bg-dark border-0" style="background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%); border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.3);">
					<div class="card-body">
						<div class="img-wrapper" style="border-radius: 15px; overflow: hidden;">
							<img src="{{ item.image }}" alt="{{ item.name }}" class="img-fluid" style="width:100%; height: auto; object-fit: cover;">
						</div>
						<div class="mt-3">
							<h2 class="mb-2" style="font-weight:700;">{{ item.name }}</h2>
							<div class="d-flex align-items-center mb-2">
								<i class="fa fa-star checked"></i>
								<i class="fa fa-star checked"></i>
								<i class="fa fa-star checked"></i>
								<i class="fa fa-star checked"></i>
								<i class="fa fa-star checked"></i>
								<span class="text-muted ml-2">({{ range(1, 51) | random }})</span>
							</div>
							<span class="badge badge-secondary">{{ item.category }}</span>
						</div>
					</div>
				</div>
				<div class="card bg-dark border-0" style="background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%); border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.3);">
					<div class="card-body">
						<h4 class="mb-3">Details</h4>
						<div class="details">{{ item.details | safe }}</div>
					</div>
				</div>
			</div>

			<!-- Right: Buy Card -->
			<div class="col-lg-5">
				<div class="card position-sticky" style="top: 20px; background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%); border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); border: 1px solid #333;">
					<div class="card-body">
						<div class="d-flex align-items-baseline justify-content-between mb-3">
							<h3 class="mb-0" style="font-weight:700;">${{ item.price }}</h3>
							<span class="text-muted">USD</span>
						</div>
						<form action="{{ url_for('add_to_cart', id=item.id) }}" method="POST">
							<label for="quantity" class="d-block mb-2">Quantity</label>
							<div class="input-group mb-3" style="max-width: 220px;">
								<div class="input-group-prepend">
									<button class="btn btn-outline-success" type="button" onclick="var q=document.getElementById('qty'); if(+q.value>1) q.value=+q.value-1;">âˆ’</button>
								</div>
								<input id="qty" class="form-control text-center" type="number" value="1" name="quantity" min="1" max="50" required>
								<div class="input-group-append">
									<button class="btn btn-outline-success" type="button" onclick="var q=document.getElementById('qty'); if(+q.value<50) q.value=+q.value+1;">+</button>
								</div>
							</div>
							<button type="submit" class="btn btn-success btn-block">Add to Cart</button>
						</form>
						<hr>
						<ul class="list-unstyled mb-0">
							<li class="mb-2"><i class="fa fa-truck mr-2"></i> Free shipping</li>
							<li class="mb-2"><i class="fa fa-refresh mr-2"></i> Easy returns</li>
							<li class="mb-2"><i class="fa fa-shield mr-2"></i> Secure checkout</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}